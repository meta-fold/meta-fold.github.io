<!DOCTYPE html>
<html>
  <head>
    <title>MetaFold</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="author" content="Anonymous">
    <!-- <meta name="description" content=""> -->
    <meta name="viewport" content="width=800px, initial-scale=0.8, maximum-scale=2.0, user-scalable=yes">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans|Noto+Sans|Castoro">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">
    <link rel="stylesheet" href="./static/css/bulma.min.css">
    <link rel="stylesheet" href="./static/css/bulma-carousel.min.css">
    <link rel="stylesheet" href="./static/css/bulma-slider.min.css">
    <link rel="stylesheet" href="./static/css/fontawesome.all.min.css">
    <link rel="stylesheet" href="./static/css/index.css">
    <link rel="icon" href="./static/data/icon_clothes.png">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script defer src="./static/js/fontawesome.all.min.js"></script>
    <script src="./static/js/bulma-carousel.min.js"></script>
    <script src="./static/js/bulma-slider.min.js"></script>
    <script src="./static/js/index.js"></script>

    <!-- MathJax -->
    <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>        
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      });
    </script>

    <!-- visitor statistics -->
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <!-- model-viewer -->
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/3.5.0/model-viewer.min.js"></script>
  </head>


  <body>
    <!-- Title -->
    <section class="hero">
      <div class="hero-body">
        <div class="container is-max-desktop">
          <div class="columns is-centered">
            <div class="column has-text-centered">
              <h1 class="title is-1 publication-title">MetaFold: Language-Guided Multi-Category Garment Folding Framework
                via Trajectory Generation and Foundation Model</h1>

              <div class="is-size-5 publication-authors">
                <div>
                  <a href="https://chenhn02.github.io/">Haonan Chen</a><sup>*1, 2</sup>,
                  <a href="https://meta-fold.github.io/">Junxiao Li</a><sup>*3</sup>,
                  <a href="https://warshallrho.github.io/">Ruihai Wu</a><sup>*4</sup>,
                  <a href="https://lew1sin.github.io/">Yiwei Liu</a><sup>1</sup>,
                  <a href="https://houyiwen.github.io/">Yiwen Hou</a><sup>1</sup>,
                  <a href="https://ariszxxu.github.io/">Zhixuan Xu</a><sup>1</sup>,<br>
                  <a href="https://borisguo6.github.io/">Jingxiang Guo</a><sup>1</sup>,
                  <a href="https://chongkaigao.com/">Chongkai Gao</a><sup>1</sup>,
                  <a href="https://zhenyuwei2003.github.io/">Zhenyu Wei</a><sup>5</sup>,
                  <a href="https://meta-fold.github.io/">Shensi Xu</a><sup>3</sup>,
                  <a href="https://meta-fold.github.io/">Jiaqi Huang</a><sup>3</sup>,
                  <a href="https://linsats.github.io/">Lin Shao</a><sup>&dagger;1, 2</sup>
                </div>
              </div>

              <div class="is-size-5 publication-affiliations" style="margin-top: 0.4em;">
                <p>
                  <!-- <sup>1</sup> School of Computing, National University of Singapore <br>
                  <sup>2</sup> NUS Guangzhou Research Translation and Innovation Institute <br>
                  <sup>3</sup> School of Computer Science, Nanjing University <br>
                  <sup>4</sup> School of Computer Science, Peking University <br>
                  <sup>5</sup> School of Electronic Information and Electrical Engineering, Shanghai Jiao Tong University <br> -->

                  <sup>1</sup> National University of Singapore   <sup>2</sup> NUS Guangzhou Research Translation and Innovation Institute <br>
                  <sup>3</sup> Nanjing University   <sup>4</sup> Peking University  <sup>5</sup> Shanghai Jiao Tong University <br>

                  <sup>*</sup> denotes equal contribution   <sup>&dagger;</sup> corresponding author
                </p>
               
                <h3 class="title is-4" style="margin-top: 0.4em;">Accepted to IROS 2025 (Oral Presentation)</h3>
              </div>

              <div class="column has-text-centered">
                <div class="publication-links">
                  <!-- PDF Link -->
                  <span class="link-block">
                    <a href="https://arxiv.org/abs/2503.08372" class="external-link button is-normal is-rounded is-dark">
                      <span class="icon">
                        <i class="ai ai-arxiv"></i>
                      </span>
                      <span>arXiv</span>
                    </a>
                  </span>

                  <span class="link-block">
                    <a href="https://arxiv.org/pdf/2503.08372" class="external-link button is-normal is-rounded is-dark">
                      <span class="icon">
                        <i class="fas fa-file-pdf"></i>
                      </span>
                      <span>Paper</span>
                    </a>
                  </span>
                  <!-- <span class="link-block">
                    <a href="#" class="external-link button is-normal is-rounded is-dark">
                      <span class="icon">
                        <i class="fas fa-file-pdf"></i>
                      </span>
                      <span>Appendix</span>
                    </a>
                  </span> -->

                  <!-- Code Link -->
                  <!-- <span class="link-block">
                    <a href="#" class="external-link button is-normal is-rounded is-dark">
                      <span class="icon">
                        <i class="fab fa-github"></i>
                      </span>
                      <span>Code</span>
                    </a>
                  </span> -->

                  <!-- Dataset Link -->
                  <span class="link-block">
                    <a href="https://huggingface.co/datasets/chenhn02/MetaFold" class="external-link button is-normal is-rounded is-dark">
                      <span class="icon">
                        <i class="fas fa-database"></i>
                      </span>
                      <span>Dataset</span>
                    </a>
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Intro Video -->
    <section class="hero teaser" style="margin-top: -30px;">
      <div class="container is-max-desktop">
        <div class="hero-body">
          <video id="intro" controls playsinline height="100%">
            <source src="./static/data/MetaFold.mp4" type="video/mp4">
          </video>
        </div>
      </div>
    </section>
    <!--/ Intro Video -->

    <section class="section">
      <div class="container is-max-desktop">
        <!-- Abstract -->
        <div class="columns is-centered has-text-centered">
          <div class="column is-four-fifths">
            <h2 class="title is-3">Abstract</h2>
            <div class="content has-text-justified">
              <p>
                Garment folding is a common yet challenging task in robotic manipulation. The deformability of garments leads to a vast state space and complex dynamics and complicates precise fine-grained manipulation.
                Previous approaches often rely on predefined key points or demonstrations,
                constraining their generalizability across diverse garment categories. This paper presents a framework, <b>MetaFold</b>, that disentangles task planning from action prediction, learning each independently to enhance model generalization. It employs language-guided point cloud trajectory generation for task planning and a low-level foundation model for action prediction. This structure facilitates multi-category learning, enabling the model to adapt flexibly to various user instructions and folding tasks. Experimental results  demonstrate our proposed framework's superiority. 
              </p>
            </div>
          </div>
        </div>
        <!--/ Abstract -->
      </div>
    </section>

    <section class="section">
      <!-- Overview -->
      <div class="container is-max-desktop">
        <div class="columns is-centered has-text-centered">
          <div class="column is-full">
            <h2 class="title is-3">Pipeline Overview</h2>
            <div class="content has-text-justified">
              <figure>
                <img src="./static/data/MetaFold_overview.png" alt="Overview of MetaFold framework image" style="max-width: 100%;">
                <figcaption style="font-style: normal; font-size: 0.95em; text-align: left;"> <b>Overview</b>: The folding trajectory data for clothing is generated using heuristic methods in the DiffClothAI simulation environment, with language
                  descriptions subsequently added <b style="color: #70AD47;">(Green)</b>. The trajectory generation model takes a point cloud from any given frame and a corresponding language
                  description as inputs to generate the subsequent trajectory <b style="color: #ED7D31;">(Orange)</b>. The generated trajectory is fed into the ManiFoundation model to estimate contact
                  points and force directions, enabling the robot to conduct garment folding actions. This process is then iteratively refined using a feedback loop <b style="color: #5b9bd5;">(Blue)</b>.
                </figcaption>
              </figure>
            </div>
          </div>
        </div>
      </div>
      <!--/ Overview -->
    </section>


    <section class="section">
      <div class="container is-max-desktop">
        <div class="columns is-centered">
          <div class="column">
            <h2 class="title is-3 has-text-centered">MetaFold Dataset Visualization</h2>
            <!-- Auto-play toggle -->
            <div class="has-text-centered" style="margin-bottom: 5px;">
              <label style="font-size: 18px; font-weight: bold; margin-right: 15px;">Auto Play:</label>
              <label class="switch" style="position: relative; display: inline-block; width: 60px; height: 34px;">
                <input type="checkbox" id="autoPlayToggle" style="opacity: 0; width: 0; height: 0;">
                <span style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px;"></span>
                <span style="position: absolute; cursor: pointer; content: ''; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%;"></span>
              </label>
            </div>
          </div>
        </div>

        <div class="columns is-centered has-text-centered">
          <div class="column is-four-fifths">
            <div class="content has-text-justified">
              <p>
                We present visualizations of several garment folding trajectories from the MetaFold Dataset. These garments include NoSleeve, ShortSleeve, LongSleeve, and Pants. 
                
                Each row contains three different garments; dragging the slider beneath a garment reveals its folding process. Selecting the action on the right side of each row visualizes the subsequent folding stages. NoSleeve has only one folding stage, ShortSleeve and LongSleeve each have three stages, and Pants has two stages.
              </p>
            </div>
          </div>
        </div>

        <!-- No-Sleeve Row -->
        <div class="garment-row" style="margin-bottom: 40px;">
          <h3 class="title is-4 has-text-centered" style="margin-bottom: 20px; color: #66c0ff;">No-Sleeve</h3>
          <div class="columns is-centered has-text-centered">
            <!-- No-Sleeve Garment 1 -->
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center;">
              <model-viewer id="nosleeve1" src="static/data/NoSleeve/DSNS_Dress115/DSNS_Dress115_action0/frame_00.glb" alt="No-Sleeve 1" camera-controls="" auto-rotate="" auto-rotate-delay="3000" style="width: 200px; height: 200px; border: 3px solid #66c0ff; border-radius: 15px;">
              </model-viewer>
              <p style="font-size: 18px; font-weight: bold; margin: 10px 0 5px 0;">No-Sleeve 1</p>
              <input type="range" class="frame-slider" data-garment="nosleeve1" min="0" max="20" value="0" style="width: 150px; height: 15px;">
              <span class="frame-display" style="font-size: 12px; color: #666;">00/20</span>
            </div>
            
            <!-- No-Sleeve Garment 2 -->
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center;">
              <model-viewer id="nosleeve2" src="static/data/NoSleeve/TNNC_Top229/TNNC_Top229_action0/frame_00.glb" alt="No-Sleeve 2" camera-controls="" auto-rotate="" auto-rotate-delay="3000" style="width: 200px; height: 200px; border: 3px solid #66c0ff; border-radius: 15px;">
              </model-viewer>
              <p style="font-size: 18px; font-weight: bold; margin: 10px 0 5px 0;">No-Sleeve 2</p>
              <input type="range" class="frame-slider" data-garment="nosleeve2" min="0" max="20" value="0" style="width: 150px; height: 15px;">
              <span class="frame-display" style="font-size: 12px; color: #666;">00/20</span>
            </div>
            
            <!-- No-Sleeve Garment 3 -->
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center;">
              <model-viewer id="nosleeve3" src="static/data/NoSleeve/DLNS_Dress016/DLNS_Dress016_action0/frame_00.glb" alt="No-Sleeve 3" camera-controls="" auto-rotate="" auto-rotate-delay="3000" style="width: 200px; height: 200px; border: 3px solid #66c0ff; border-radius: 15px;">
              </model-viewer>
              <p style="font-size: 18px; font-weight: bold; margin: 10px 0 5px 0;">No-Sleeve 3</p>
              <input type="range" class="frame-slider" data-garment="nosleeve3" min="0" max="20" value="0" style="width: 150px; height: 15px;">
              <span class="frame-display" style="font-size: 12px; color: #666;">00/20</span>
            </div>
            
            <!-- Action Selector for No-Sleeve -->
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 180px;">
              <label style="font-size: 20px; font-weight: bold; margin-bottom: 15px; color: #66c0ff;">Action:</label>
              <select class="action-selector" data-garment-type="nosleeve" style="padding: 12px 20px; font-size: 18px; border-radius: 8px; border: 2px solid #66c0ff; background-color: white; min-width: 120px;">
                <option value="0">Action 0</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Short-Sleeve Row -->
        <div class="garment-row" style="margin-bottom: 40px;">
          <h3 class="title is-4 has-text-centered" style="margin-bottom: 20px; color: #FF8C42;">Short-Sleeve</h3>
          <div class="columns is-centered has-text-centered">
            <!-- Short-Sleeve Garment 1 -->
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center;">
              <model-viewer id="shortsleeve1" src="static/data/ShortSleeve/TNSC_089/TNSC_089_action0/frame_00.glb" alt="Short-Sleeve 1" camera-controls="" auto-rotate="" auto-rotate-delay="3000" style="width: 200px; height: 200px; border: 3px solid #FF8C42; border-radius: 15px;">
              </model-viewer>
              <p style="font-size: 18px; font-weight: bold; margin: 10px 0 5px 0;">Short-Sleeve 1</p>
              <input type="range" class="frame-slider" data-garment="shortsleeve1" min="0" max="20" value="0" style="width: 150px; height: 15px;">
              <span class="frame-display" style="font-size: 12px; color: #666;">00/20</span>
            </div>
            
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center;">
              <model-viewer id="shortsleeve2" src="static/data/ShortSleeve/TNSC_model2_076/TNSC_model2_076_action0/frame_00.glb" alt="Short-Sleeve 2" camera-controls="" auto-rotate="" auto-rotate-delay="3000" style="width: 200px; height: 200px; border: 3px solid #FF8C42; border-radius: 15px;">
              </model-viewer>
              <p style="font-size: 18px; font-weight: bold; margin: 10px 0 5px 0;">Short-Sleeve 2</p>
              <input type="range" class="frame-slider" data-garment="shortsleeve2" min="0" max="20" value="0" style="width: 150px; height: 15px;">
              <span class="frame-display" style="font-size: 12px; color: #666;">00/20</span>
            </div>
            
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center;">
              <model-viewer id="shortsleeve3" src="static/data/ShortSleeve/TNSC_Top511/TNSC_Top511_action0/frame_00.glb" alt="Short-Sleeve 3" camera-controls="" auto-rotate="" auto-rotate-delay="3000" style="width: 200px; height: 200px; border: 3px solid #FF8C42; border-radius: 15px;">
              </model-viewer>
              <p style="font-size: 18px; font-weight: bold; margin: 10px 0 5px 0;">Short-Sleeve 3</p>
              <input type="range" class="frame-slider" data-garment="shortsleeve3" min="0" max="20" value="0" style="width: 150px; height: 15px;">
              <span class="frame-display" style="font-size: 12px; color: #666;">00/20</span>
            </div>
            
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 180px;">
              <label style="font-size: 20px; font-weight: bold; margin-bottom: 15px; color: #FF8C42;">Action:</label>
              <select class="action-selector" data-garment-type="shortsleeve" style="padding: 12px 20px; font-size: 18px; border-radius: 8px; border: 2px solid #FF8C42; background-color: white; min-width: 120px;">
                <option value="0">Action 0</option>
                <option value="1">Action 1</option>
                <option value="2">Action 2</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Long-Sleeve Row -->
        <div class="garment-row" style="margin-bottom: 40px;">
          <h3 class="title is-4 has-text-centered" style="margin-bottom: 20px; color: #4ECDC4;">Long-Sleeve</h3>
          <div class="columns is-centered has-text-centered">
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center;">
              <model-viewer id="longsleeve1" src="static/data/LongSleeve/TCLC_023/TCLC_023_action0/frame_00.glb" alt="Long-Sleeve 1" camera-controls="" auto-rotate="" auto-rotate-delay="3000" style="width: 200px; height: 200px; border: 3px solid #4ECDC4; border-radius: 15px;">
              </model-viewer>
              <p style="font-size: 18px; font-weight: bold; margin: 10px 0 5px 0;">Long-Sleeve 1</p>
              <input type="range" class="frame-slider" data-garment="longsleeve1" min="0" max="20" value="0" style="width: 150px; height: 15px;">
              <span class="frame-display" style="font-size: 12px; color: #666;">00/20</span>
            </div>
            
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center;">
              <model-viewer id="longsleeve2" src="static/data/LongSleeve/TCLC_Top073/TCLC_Top073_action0/frame_00.glb" alt="Long-Sleeve 2" camera-controls="" auto-rotate="" auto-rotate-delay="3000" style="width: 200px; height: 200px; border: 3px solid #4ECDC4; border-radius: 15px;">
              </model-viewer>
              <p style="font-size: 18px; font-weight: bold; margin: 10px 0 5px 0;">Long-Sleeve 2</p>
              <input type="range" class="frame-slider" data-garment="longsleeve2" min="0" max="20" value="0" style="width: 150px; height: 15px;">
              <span class="frame-display" style="font-size: 12px; color: #666;">00/20</span>
            </div>
            
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center;">
              <model-viewer id="longsleeve3" src="static/data/LongSleeve/TNLC_shirt2/TNLC_shirt2_action0/frame_00.glb" alt="Long-Sleeve 3" camera-controls="" auto-rotate="" auto-rotate-delay="3000" style="width: 200px; height: 200px; border: 3px solid #4ECDC4; border-radius: 15px;">
              </model-viewer>
              <p style="font-size: 18px; font-weight: bold; margin: 10px 0 5px 0;">Long-Sleeve 3</p>
              <input type="range" class="frame-slider" data-garment="longsleeve3" min="0" max="20" value="0" style="width: 150px; height: 15px;">
              <span class="frame-display" style="font-size: 12px; color: #666;">00/20</span>
            </div>
            
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 180px;">
              <label style="font-size: 20px; font-weight: bold; margin-bottom: 15px; color: #4ECDC4;">Action:</label>
              <select class="action-selector" data-garment-type="longsleeve" style="padding: 12px 20px; font-size: 18px; border-radius: 8px; border: 2px solid #4ECDC4; background-color: white; min-width: 120px;">
                <option value="0">Action 0</option>
                <option value="1">Action 1</option>
                <option value="2">Action 2</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Pants Row -->
        <div class="garment-row" style="margin-bottom: 40px;">
          <h3 class="title is-4 has-text-centered" style="margin-bottom: 20px; color: #A569BD;">Pants</h3>
          <div class="columns is-centered has-text-centered">
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center;">
              <model-viewer id="pants1" src="static/data/Pants/PL_028/PL_028_action0/frame_00.glb" alt="Pants 1" camera-controls="" auto-rotate="" auto-rotate-delay="3000" style="width: 200px; height: 200px; border: 3px solid #A569BD; border-radius: 15px;">
              </model-viewer>
              <p style="font-size: 18px; font-weight: bold; margin: 10px 0 5px 0;">Pants 1</p>
              <input type="range" class="frame-slider" data-garment="pants1" min="0" max="20" value="0" style="width: 150px; height: 15px;">
              <span class="frame-display" style="font-size: 12px; color: #666;">00/20</span>
            </div>
            
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center;">
              <model-viewer id="pants2" src="static/data/Pants/PL_032/PL_032_action0/frame_00.glb" alt="Pants 2" camera-controls="" auto-rotate="" auto-rotate-delay="3000" style="width: 200px; height: 200px; border: 3px solid #A569BD; border-radius: 15px;">
              </model-viewer>
              <p style="font-size: 18px; font-weight: bold; margin: 10px 0 5px 0;">Pants 2</p>
              <input type="range" class="frame-slider" data-garment="pants2" min="0" max="20" value="0" style="width: 150px; height: 15px;">
              <span class="frame-display" style="font-size: 12px; color: #666;">00/20</span>
            </div>
            
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center;">
              <model-viewer id="pants3" src="static/data/Pants/PS_009/PS_009_action0/frame_00.glb" alt="Pants 3" camera-controls="" auto-rotate="" auto-rotate-delay="3000" style="width: 200px; height: 200px; border: 3px solid #A569BD; border-radius: 15px;">
              </model-viewer>
              <p style="font-size: 18px; font-weight: bold; margin: 10px 0 5px 0;">Pants 3</p>
              <input type="range" class="frame-slider" data-garment="pants3" min="0" max="20" value="0" style="width: 150px; height: 15px;">
              <span class="frame-display" style="font-size: 12px; color: #666;">00/20</span>
            </div>
            
            <div class="column is-one-quarter" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 180px;">
              <label style="font-size: 20px; font-weight: bold; margin-bottom: 15px; color: #A569BD;">Action:</label>
              <select class="action-selector" data-garment-type="pants" style="padding: 12px 20px; font-size: 18px; border-radius: 8px; border: 2px solid #A569BD; background-color: white; min-width: 120px;">
                <option value="0">Action 0</option>
                <option value="1">Action 1</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <script>
        // Update individual model viewer based on frame slider
        function updateIndividualViewer(garmentId, frame, action) {
          const paddedFrame = frame.toString().padStart(2, '0');
          const viewer = document.getElementById(garmentId);
          
          // Define the mapping for each garment
          const garmentMapping = {
            'nosleeve1': 'NoSleeve/DSNS_Dress115/DSNS_Dress115',
            'nosleeve2': 'NoSleeve/TNNC_Top229/TNNC_Top229',
            'nosleeve3': 'NoSleeve/DLNS_Dress016/DLNS_Dress016',
            'shortsleeve1': 'ShortSleeve/TNSC_089/TNSC_089',
            'shortsleeve2': 'ShortSleeve/TNSC_model2_076/TNSC_model2_076',
            'shortsleeve3': 'ShortSleeve/TNSC_Top511/TNSC_Top511',
            'longsleeve1': 'LongSleeve/TCLC_023/TCLC_023',
            'longsleeve2': 'LongSleeve/TCLC_Top073/TCLC_Top073',
            'longsleeve3': 'LongSleeve/TNLC_shirt2/TNLC_shirt2',
            'pants1': 'Pants/PL_028/PL_028',
            'pants2': 'Pants/PL_032/PL_032',
            'pants3': 'Pants/PS_009/PS_009'
          };
          
          const garmentPath = garmentMapping[garmentId];
          
          if (viewer && garmentPath) {
            viewer.src = `static/data/${garmentPath}_action${action}/frame_${paddedFrame}.glb`;
          }
        }

        // Handle frame slider changes
        document.addEventListener('input', function(e) {
          if (e.target.classList.contains('frame-slider')) {
            const garmentId = e.target.getAttribute('data-garment');
            const frame = e.target.value;
            const paddedFrame = frame.toString().padStart(2, '0');
            
            // Update frame display
            const frameDisplay = e.target.nextElementSibling;
            frameDisplay.textContent = `${paddedFrame}/20`;
            
            // Get current action for this garment type
            const garmentType = garmentId.replace(/\d+$/, '');
            const actionSelector = document.querySelector(`select[data-garment-type="${garmentType}"]`);
            const currentAction = actionSelector ? actionSelector.value : '0';
            
            // Update the viewer
            updateIndividualViewer(garmentId, frame, currentAction);
          }
        });

        // Handle action selector changes
        document.addEventListener('change', function(e) {
          if (e.target.classList.contains('action-selector')) {
            const garmentType = e.target.getAttribute('data-garment-type');
            const newAction = e.target.value;
            
            // Update all viewers of this garment type and reset frames to 00
            for (let i = 1; i <= 3; i++) {
              const garmentId = `${garmentType}${i}`;
              const frameSlider = document.querySelector(`input[data-garment="${garmentId}"]`);
              const frameDisplay = frameSlider ? frameSlider.nextElementSibling : null;
              
              // Reset frame slider to 0 and update display
              if (frameSlider) {
                frameSlider.value = 0;
              }
              if (frameDisplay) {
                frameDisplay.textContent = '00/20';
              }
              
              // Update the viewer with frame 0
              updateIndividualViewer(garmentId, 0, newAction);
            }
          }
        });

        // Auto-play variables
        let autoPlayInterval = null;
        let isAutoPlaying = false;

        // Auto-play functionality
        function startAutoPlay() {
          if (autoPlayInterval) return; // Already running
          
          autoPlayInterval = setInterval(() => {
            document.querySelectorAll('.frame-slider').forEach(slider => {
              let currentValue = parseInt(slider.value);
              let nextValue = currentValue + 1;
              
              // Reset to 0 if we've reached the end
              if (nextValue > 20) {
                nextValue = 0;
              }
              
              // Update slider value
              slider.value = nextValue;
              
              // Trigger the input event to update the viewer
              const event = new Event('input', { bubbles: true });
              slider.dispatchEvent(event);
            });
          }, 300); // Change frame every 300ms
        }

        function stopAutoPlay() {
          if (autoPlayInterval) {
            clearInterval(autoPlayInterval);
            autoPlayInterval = null;
          }
        }

        // Toggle switch styling and functionality
        document.addEventListener('DOMContentLoaded', function() {
          // Add CSS for toggle switch
          const style = document.createElement('style');
          style.textContent = `
            input:checked + span {
              background-color: #4ECDC4 !important;
            }
            input:checked + span + span {
              transform: translateX(26px) !important;
            }
          `;
          document.head.appendChild(style);

          // Initialize all frame displays
          document.querySelectorAll('.frame-slider').forEach(slider => {
            const frameDisplay = slider.nextElementSibling;
            frameDisplay.textContent = '00/20';
          });

          // Auto-play toggle event listener
          const autoPlayToggle = document.getElementById('autoPlayToggle');
          autoPlayToggle.addEventListener('change', function() {
            isAutoPlaying = this.checked;
            if (isAutoPlaying) {
              startAutoPlay();
            } else {
              stopAutoPlay();
            }
          });
        });

        // BibTeX section
        const bibtexSection = document.getElementById('BibTeX');
        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              // Load BibTeX content
              bibtexSection.innerHTML = `
                <div class="container is-max-desktop">
                  <h2 class="title is-3">BibTeX</h2>
                  <pre><code>@misc{chen2025metafoldlanguageguidedmulticategorygarment,
  title={MetaFold: Language-Guided Multi-Category Garment Folding Framework via Trajectory Generation and Foundation Model}, 
  author={Haonan Chen and Junxiao Li and Ruihai Wu and Yiwei Liu and Yiwen Hou and Zhixuan Xu and Jingxiang Guo and Chongkai Gao and Zhenyu Wei and Shensi Xu and Jiaqi Huang and Lin Shao},
  year={2025},
  eprint={2503.08372},
  archivePrefix={arXiv},
  primaryClass={cs.RO},
  url={https://arxiv.org/abs/2503.08372}, 
}</code></pre>
                </div>
              `;
              
              // Unobserve after loading
              observer.unobserve(bibtexSection);
            }
          });
        }, { threshold: 0.1 });

        observer.observe(bibtexSection);
      </script>
    </section>

    <!-- BibTex -->
    <section class="section" id="BibTeX">
      <div class="container is-max-desktop">
        <h2 class="title is-3">BibTeX</h2>
        <pre><code>@misc{chen2025metafoldlanguageguidedmulticategorygarment,
  title={MetaFold: Language-Guided Multi-Category Garment Folding Framework via Trajectory Generation and Foundation Model}, 
  author={Haonan Chen and Junxiao Li and Ruihai Wu and Yiwei Liu and Yiwen Hou and Zhixuan Xu and Jingxiang Guo and Chongkai Gao and Zhenyu Wei and Shensi Xu and Jiaqi Huang and Lin Shao},
  year={2025},
  eprint={2503.08372},
  archivePrefix={arXiv},
  primaryClass={cs.RO},
  url={https://arxiv.org/abs/2503.08372}, 
}</code></pre>
      </div>
    </section>
    <!--/ BibTex -->

    <!-- Footer -->
    <footer class="footer", style="padding: 40px 0;">
      <div class="container">
        <div class="columns is-centered">
          <div class="column is-8">
            <div class="content">
              <p style="text-align: center;">
                This website is designed based on
                <a href="https://github.com/nerfies/nerfies.github.io">Nerfies</a>.
                <br>
                Thanks for your visitingðŸ˜Š!
                <span id="busuanzi_container_site_pv">
                  Total Page Views: <span id="busuanzi_value_site_pv"></span>
                </span>
                <br>
              </p>
            </div>
          </div>
        </div>
      </div>
    </footer>
    <!--/ Footer -->

  </body>
</html>
